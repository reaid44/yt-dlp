<!DOCTYPE html>
<html lang="bn">
<head>
    <meta charset="UTF-8">
    <title>REAID SARDAR</title></title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="/static/style.css">
</head>
<body>
    <div class="container">
        <h1>ЁЯУе DOWNLOAD</h1>

        <div class="input-group">
            <input type="text" id="urlInput" placeholder="ржЗржЙржЯрж┐ржЙржм рж▓рж┐ржВржХ ржжрж┐ржи..." required>
            <button type="button" class="arrow" onclick="startProcessing()">
                <img src="/static/icons/red-arrow.png" alt="Arrow" class="arrow-icon">
            </button>
        </div>

        <div id="status" class="status-text">тП│ ржкрзНрж░рж╕рзЗрж╕рж┐ржВ рж╣ржЪрзНржЫрзЗ<span id="dots"></span></div>

        <div id="format-options" class="dropdown hidden">
            <button onclick="download('mp4')">ЁЯОе MP4</button>
            <button onclick="download('mp3')">ЁЯФК MP3</button>
            <button onclick="download('both')">ЁЯОм MP4-MP3</button>
        </div>

        <div class="preview">
            <img src="/static/thumbnail.jpg" alt="ржнрж┐ржбрж┐ржУ ржерж╛ржорзНржмржирзЗржЗрж▓">
            <p class="video-title">ЁЯОм Big Buck Bunny UHD</p>
        </div>

        <script>
            let dotCount = 0;
            setInterval(() => {
                dotCount = (dotCount + 1) % 4;
                document.getElementById("dots").innerText = ".".repeat(dotCount);
            }, 500);

            function startProcessing() {
                const url = document.getElementById("urlInput").value;
                if (!url) return alert("тЪая╕П ржЗржЙржЯрж┐ржЙржм рж▓рж┐ржВржХ ржжрж┐ржи");

                document.getElementById("status").innerText = "тП│ ржкрзНрж░рж╕рзЗрж╕рж┐ржВ рж╣ржЪрзНржЫрзЗ...";
                document.getElementById("format-options").classList.add("hidden");

                fetch("/prepare", {
                    method: "POST",
                    headers: { "Content-Type": "application/json" },
                    body: JSON.stringify({ url })
                })
                .then(res => res.json())
                .then(data => {
                    if (data.ready) {
                        document.getElementById("status").innerText = "тЬЕ ржлрж╛ржЗрж▓ ржкрзНрж░рж╕рзНрждрзБржд!";
                        document.getElementById("format-options").classList.remove("hidden");
                    } else {
                        document.getElementById("status").innerText = "тЭМ ржбрж╛ржЙржирж▓рзЛржб ржмрзНржпрж░рзНрже рж╣рзЯрзЗржЫрзЗ";
                    }
                });
            }

            function download(type) {
                window.location.href = `/download?type=${type}`;
            }
        </script>
    </div>
</body>
</html>
